<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>firmware: lib/src/S13131.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Chromation_colored.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">firmware
   &#160;<span id="projectnumber">v0.1.2</span>
   </div>
   <div id="projectbrief">Chromation Spectrometer Dev-Kit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a065c5f60305fee3569f887679366939.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">S13131.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;ReadWriteBits.h&gt;</code><br />
</div>
<p><a href="S13131_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aebccd6b42d427ada3124a7a962e82f39"><td class="memItemLeft" align="right" valign="top"><a id="aebccd6b42d427ada3124a7a962e82f39"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="S13131_8h.html#aebccd6b42d427ada3124a7a962e82f39">MAX_NUM_PIXELS</a>&#160;&#160;&#160;512</td></tr>
<tr class="memdesc:aebccd6b42d427ada3124a7a962e82f39"><td class="mdescLeft">&#160;</td><td class="mdescRight">S13131-512 has 512 pixels. <br /></td></tr>
<tr class="separator:aebccd6b42d427ada3124a7a962e82f39"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a87d0228f09594442028485d237680a36"><td class="memItemLeft" align="right" valign="top"><a id="a87d0228f09594442028485d237680a36"></a>
typedef uint8_t volatile *const&#160;</td><td class="memItemRight" valign="bottom"><b>s13131_ptr</b></td></tr>
<tr class="separator:a87d0228f09594442028485d237680a36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace9ffa3fe9c4f13e5d505f2e0517d0f3"><td class="memItemLeft" align="right" valign="top"><a id="ace9ffa3fe9c4f13e5d505f2e0517d0f3"></a>
typedef uint8_t const&#160;</td><td class="memItemRight" valign="bottom"><b>s13131_pin</b></td></tr>
<tr class="separator:ace9ffa3fe9c4f13e5d505f2e0517d0f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56939b6e0419e21e5e7de34115c6a131"><td class="memItemLeft" align="right" valign="top"><a id="a56939b6e0419e21e5e7de34115c6a131"></a>
typedef uint8_t const&#160;</td><td class="memItemRight" valign="bottom"><b>s13131_bit</b></td></tr>
<tr class="separator:a56939b6e0419e21e5e7de34115c6a131"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2422f07f9c4038cbf6bd67c74f753662"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="S13131_8h.html#a2422f07f9c4038cbf6bd67c74f753662">MSB</a> (uint16_t msb_lsb)</td></tr>
<tr class="separator:a2422f07f9c4038cbf6bd67c74f753662"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae21540775e7108af4e64e07cd4899232"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="S13131_8h.html#ae21540775e7108af4e64e07cd4899232">LSB</a> (uint16_t msb_lsb)</td></tr>
<tr class="separator:ae21540775e7108af4e64e07cd4899232"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aace8f1c0b7ac368012baa803f164633a"><td class="memItemLeft" align="right" valign="top"><a id="aace8f1c0b7ac368012baa803f164633a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>S13131PinSetup</b> (void)</td></tr>
<tr class="separator:aace8f1c0b7ac368012baa803f164633a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63ecee6dae9f64bcc9dc4beda909a90e"><td class="memItemLeft" align="right" valign="top"><a id="a63ecee6dae9f64bcc9dc4beda909a90e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>S13131StartClocking</b> (void)</td></tr>
<tr class="separator:a63ecee6dae9f64bcc9dc4beda909a90e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe557c2a17fb94877a0721ccd1baea72"><td class="memItemLeft" align="right" valign="top"><a id="afe557c2a17fb94877a0721ccd1baea72"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>WaitForS13131ClkLow</b> (void)</td></tr>
<tr class="separator:afe557c2a17fb94877a0721ccd1baea72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66db2d215939dde077e354b779f8f4e0"><td class="memItemLeft" align="right" valign="top"><a id="a66db2d215939dde077e354b779f8f4e0"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>WaitForS13131ClkHigh</b> (void)</td></tr>
<tr class="separator:a66db2d215939dde077e354b779f8f4e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29d6893460030931978cf4cae6ab5144"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="S13131_8h.html#a29d6893460030931978cf4cae6ab5144">S13131Expose</a> (void)</td></tr>
<tr class="separator:a29d6893460030931978cf4cae6ab5144"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aa40bb208afd06c3ca248325e44444bbe"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="S13131_8h.html#aa40bb208afd06c3ca248325e44444bbe">exposure_ticks</a></td></tr>
<tr class="memdesc:aa40bb208afd06c3ca248325e44444bbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">S13131 exposure time.  <a href="S13131_8h.html#aa40bb208afd06c3ca248325e44444bbe">More...</a><br /></td></tr>
<tr class="separator:aa40bb208afd06c3ca248325e44444bbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1fb025cb43969639a27502f3ec7bc3d"><td class="memItemLeft" align="right" valign="top"><a id="ac1fb025cb43969639a27502f3ec7bc3d"></a>
s13131_ptr&#160;</td><td class="memItemRight" valign="bottom"><b>S13131_ddr</b></td></tr>
<tr class="separator:ac1fb025cb43969639a27502f3ec7bc3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1a5aa0f97cb92842b9baf458bd4623d"><td class="memItemLeft" align="right" valign="top"><a id="aa1a5aa0f97cb92842b9baf458bd4623d"></a>
s13131_ptr&#160;</td><td class="memItemRight" valign="bottom"><b>S13131_port</b></td></tr>
<tr class="separator:aa1a5aa0f97cb92842b9baf458bd4623d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69011331785646675fa0920d825793d3"><td class="memItemLeft" align="right" valign="top"><a id="a69011331785646675fa0920d825793d3"></a>
s13131_ptr&#160;</td><td class="memItemRight" valign="bottom"><b>S13131_pin</b></td></tr>
<tr class="separator:a69011331785646675fa0920d825793d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adac9c1e0788d3d8255295bae8d4aed52"><td class="memItemLeft" align="right" valign="top"><a id="adac9c1e0788d3d8255295bae8d4aed52"></a>
s13131_ptr&#160;</td><td class="memItemRight" valign="bottom"><b>S13131_TCCR0A</b></td></tr>
<tr class="separator:adac9c1e0788d3d8255295bae8d4aed52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8984e497ff455d578fa26b6f84832c83"><td class="memItemLeft" align="right" valign="top"><a id="a8984e497ff455d578fa26b6f84832c83"></a>
s13131_ptr&#160;</td><td class="memItemRight" valign="bottom"><b>S13131_TCCR0B</b></td></tr>
<tr class="separator:a8984e497ff455d578fa26b6f84832c83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab424f7bca56a0476bcb40c611c4868c3"><td class="memItemLeft" align="right" valign="top"><a id="ab424f7bca56a0476bcb40c611c4868c3"></a>
s13131_ptr&#160;</td><td class="memItemRight" valign="bottom"><b>S13131_TIFR0</b></td></tr>
<tr class="separator:ab424f7bca56a0476bcb40c611c4868c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e69f4e5c9d14b91f299016b19d08a37"><td class="memItemLeft" align="right" valign="top"><a id="a0e69f4e5c9d14b91f299016b19d08a37"></a>
s13131_ptr&#160;</td><td class="memItemRight" valign="bottom"><b>S13131_OCR0A</b></td></tr>
<tr class="separator:a0e69f4e5c9d14b91f299016b19d08a37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca706d4745bb6869a897ee625f9e65e3"><td class="memItemLeft" align="right" valign="top"><a id="aca706d4745bb6869a897ee625f9e65e3"></a>
s13131_ptr&#160;</td><td class="memItemRight" valign="bottom"><b>S13131_OCR0B</b></td></tr>
<tr class="separator:aca706d4745bb6869a897ee625f9e65e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa35c2a3c5e68bdf827054ae724703e1e"><td class="memItemLeft" align="right" valign="top"><a id="aa35c2a3c5e68bdf827054ae724703e1e"></a>
s13131_pin&#160;</td><td class="memItemRight" valign="bottom"><b>S13131_Clk</b></td></tr>
<tr class="separator:aa35c2a3c5e68bdf827054ae724703e1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a476655f401e683f0a013a9b5de38cfb8"><td class="memItemLeft" align="right" valign="top"><a id="a476655f401e683f0a013a9b5de38cfb8"></a>
s13131_pin&#160;</td><td class="memItemRight" valign="bottom"><b>S13131_St</b></td></tr>
<tr class="separator:a476655f401e683f0a013a9b5de38cfb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3ec3460562a532e06163ad0680a008a"><td class="memItemLeft" align="right" valign="top"><a id="ac3ec3460562a532e06163ad0680a008a"></a>
s13131_pin&#160;</td><td class="memItemRight" valign="bottom"><b>S13131_Eos</b></td></tr>
<tr class="separator:ac3ec3460562a532e06163ad0680a008a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e3e91cf78daa43e5f970eb53471072f"><td class="memItemLeft" align="right" valign="top"><a id="a3e3e91cf78daa43e5f970eb53471072f"></a>
s13131_bit&#160;</td><td class="memItemRight" valign="bottom"><b>S13131_WGM00</b></td></tr>
<tr class="separator:a3e3e91cf78daa43e5f970eb53471072f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17f6afe3f6ce9d34497e44aff745b49c"><td class="memItemLeft" align="right" valign="top"><a id="a17f6afe3f6ce9d34497e44aff745b49c"></a>
s13131_bit&#160;</td><td class="memItemRight" valign="bottom"><b>S13131_WGM01</b></td></tr>
<tr class="separator:a17f6afe3f6ce9d34497e44aff745b49c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa867bc4a6745dacee87bbbcad0a858e9"><td class="memItemLeft" align="right" valign="top"><a id="aa867bc4a6745dacee87bbbcad0a858e9"></a>
s13131_bit&#160;</td><td class="memItemRight" valign="bottom"><b>S13131_WGM02</b></td></tr>
<tr class="separator:aa867bc4a6745dacee87bbbcad0a858e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91710d17ed27ad01bcae71bba8e1ab59"><td class="memItemLeft" align="right" valign="top"><a id="a91710d17ed27ad01bcae71bba8e1ab59"></a>
s13131_bit&#160;</td><td class="memItemRight" valign="bottom"><b>S13131_CS00</b></td></tr>
<tr class="separator:a91710d17ed27ad01bcae71bba8e1ab59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5cd6aa75c6e972aeaee253815f6c6d3"><td class="memItemLeft" align="right" valign="top"><a id="aa5cd6aa75c6e972aeaee253815f6c6d3"></a>
s13131_bit&#160;</td><td class="memItemRight" valign="bottom"><b>S13131_CS01</b></td></tr>
<tr class="separator:aa5cd6aa75c6e972aeaee253815f6c6d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae840db8e398d39d0127914d118ba089a"><td class="memItemLeft" align="right" valign="top"><a id="ae840db8e398d39d0127914d118ba089a"></a>
s13131_bit&#160;</td><td class="memItemRight" valign="bottom"><b>S13131_CS02</b></td></tr>
<tr class="separator:ae840db8e398d39d0127914d118ba089a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af46221024197676f0cb387cbc71dca66"><td class="memItemLeft" align="right" valign="top"><a id="af46221024197676f0cb387cbc71dca66"></a>
s13131_bit&#160;</td><td class="memItemRight" valign="bottom"><b>S13131_COM0B0</b></td></tr>
<tr class="separator:af46221024197676f0cb387cbc71dca66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a725e64a7af4ab9bdc16f7ad844a8a56e"><td class="memItemLeft" align="right" valign="top"><a id="a725e64a7af4ab9bdc16f7ad844a8a56e"></a>
s13131_bit&#160;</td><td class="memItemRight" valign="bottom"><b>S13131_COM0B1</b></td></tr>
<tr class="separator:a725e64a7af4ab9bdc16f7ad844a8a56e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1aeaa5e7f8f8c7af6f891cf126836f59"><td class="memItemLeft" align="right" valign="top"><a id="a1aeaa5e7f8f8c7af6f891cf126836f59"></a>
s13131_bit&#160;</td><td class="memItemRight" valign="bottom"><b>S13131_OCF0A</b></td></tr>
<tr class="separator:a1aeaa5e7f8f8c7af6f891cf126836f59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62f92576a14c7c04eb7d82342bb79925"><td class="memItemLeft" align="right" valign="top"><a id="a62f92576a14c7c04eb7d82342bb79925"></a>
s13131_bit&#160;</td><td class="memItemRight" valign="bottom"><b>S13131_OCF0B</b></td></tr>
<tr class="separator:a62f92576a14c7c04eb7d82342bb79925"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h1><a class="anchor" id="autotoc_md101"></a>
API</h1>
<p>void S13131PinSetup(void);<br  />
 void S13131StartClocking(void);<br  />
void <a class="el" href="S13131_8h.html#a29d6893460030931978cf4cae6ab5144">S13131Expose(void)</a>;<br  />
S13131Readout is defined in VisCmd<br  />
</p>

<p class="definition">Definition in file <a class="el" href="S13131_8h_source.html">S13131.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ae21540775e7108af4e64e07cd4899232"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae21540775e7108af4e64e07cd4899232">&#9670;&nbsp;</a></span>LSB()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t LSB </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>msb_lsb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>LSB behavior:<br  />
</p><ul>
<li>returns least significant bit of 16bit input<br  />
</li>
</ul>

<p class="definition">Definition at line <a class="el" href="S13131_8h_source.html#l00038">38</a> of file <a class="el" href="S13131_8h_source.html">S13131.h</a>.</p>

</div>
</div>
<a id="a2422f07f9c4038cbf6bd67c74f753662"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2422f07f9c4038cbf6bd67c74f753662">&#9670;&nbsp;</a></span>MSB()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t MSB </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>msb_lsb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>MSB behavior:<br  />
</p><ul>
<li>returns most significant bit of 16bit input<br  />
</li>
</ul>

<p class="definition">Definition at line <a class="el" href="S13131_8h_source.html#l00031">31</a> of file <a class="el" href="S13131_8h_source.html">S13131.h</a>.</p>

</div>
</div>
<a id="a29d6893460030931978cf4cae6ab5144"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29d6893460030931978cf4cae6ab5144">&#9670;&nbsp;</a></span>S13131Expose()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void S13131Expose </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Exposure signals:</p><ul>
<li>ST idles LOW</li>
<li>ST goes HIGH to start exposure<ul>
<li>Bring ST HIGH some time prior to a CLK rising edge (easiest is to bring ST HIGH just after a CLK falling edge)</li>
<li>Integration time officially starts on the 3rd CLK rising edge with ST HIGH<ul>
<li>the time period from that 3rd rising edge to the 4th rising edge marks the first cycle of exposure time</li>
</ul>
</li>
</ul>
</li>
<li>ST goes LOW to end exposure<ul>
<li>Bring ST LOW some time prior to a CLK rising edge (against, easiest is to do this just after a CLK falling edge)</li>
<li>Integration time officially stops on the 9th CLK rising edge with ST LOW</li>
</ul>
</li>
</ul>
<p>This implies that the <b>minimum</b> integration time is <b>9 clocks</b>. At 50kHz, each clock is 20µs, so <b>minimum</b> integration time is 180µs.</p>
<p>Example: minimum exposure time</p>
<div class="fragment"><div class="line">  ┌─── Count all rising edges of CLK starting with first ST HIGH</div>
<div class="line">  │ ┌─ Count rising edges of CLK where ST is LOW</div>
<div class="line">  ↓ ↓</div>
<div class="line"> (x,y)</div>
<div class="line">Exposure clocks -------&gt; 1,0   2,0   3,0   4,1   5,2   6,3   7,4   8,5   9,6   10,7  11,8  12,9</div>
<div class="line">        ┌──┐  ┌──┐  ┌──┐  ┌──┐  ┌──┐  ┌──┐  ┌──┐  ┌──┐  ┌──┐  ┌──┐  ┌──┐  ┌──┐  ┌──┐  ┌──┐  ┌──┐</div>
<div class="line"> CLK    │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │</div>
<div class="line">      ──┘  └──┘  └──┘  └──┘  └──┘  └──┘  └──┘  └──┘  └──┘  └──┘  └──┘  └──┘  └──┘  └──┘  └──┘  └</div>
<div class="line">                          ↑           ↑     ↑  ↑                                            ↑</div>
<div class="line">     ST HIGH clocked-in: ─┘           │     │  │                                            │</div>
<div class="line">                     exposure START: ─┘     │  │                            exposure STOP: ─┘</div>
<div class="line">                        ST LOW clocked-in: ─┘  │                   on 9th CLK rising-edge</div>
<div class="line">                                               │                              with ST LOW</div>
<div class="line">                        ┌─────────────────┐    │</div>
<div class="line"> ST       IDLE LOW      │                 │    ↓</div>
<div class="line">      ──────────────────┘                 └─────────────────────────────────────────────────────</div>
<div class="line">                        ↑                 ↑</div>
<div class="line">                        │                 │</div>
<div class="line">    Wait <span class="keywordflow">for</span> CLK LOW    │                 │ </div>
<div class="line">      to pull ST HIGH: ─┘                 │</div>
<div class="line">                       Wait <span class="keywordflow">for</span> CLK LOW   │</div>
<div class="line">                         to pull ST LOW: ─┘</div>
</div><!-- fragment --><p>Relationship between exposure and readout:</p>
<ul>
<li>exposure ends on the 9th CLK rising edge with ST LOW</li>
<li>sample first pixel on the 14th CLK falling edge with ST LOW</li>
</ul>
<p>Therefore, readout always starts 13.5 clocks after ST LOW.</p>
<p>Example: ST HIGH for 3 clocks (4 CLK rising edges)<br  />
 This corresponds to an integration time of 10 clocks (200 µs)</p>
<div class="fragment"><div class="line">   Pixel count ---------------------------------------------------------------------------------------------------------------------&gt; 001---002-││511---512---</div>
<div class="line">                                                                                                                                      ┌──┌──┌──┌││┌──┌──┌──┌──</div>
<div class="line">                                                                                                                                      ↓  │--│  ││││  │--│  │--</div>
<div class="line">14th TRIG rising-edge (CLK falling-edge) with ST LOW: ────────────────────────────────────────────────────────────────────────────────┐  │--│  ││││  │--│  │--</div>
<div class="line">First TRIG rising-edge (CLK falling-edge) with ST LOW: ─┐                                                                             │  │--│  ││││  │--│  │--</div>
<div class="line">                                                        ↓                                                                             ↓  │--│  ││││  │--│  │--</div>
<div class="line">   Clocks waiting <span class="keywordflow">for</span> readout to start ---------------&gt; 1     2     3     4     5     6     7     8     9     10    11    12    13    14 │--│  ││││  │--│  │--</div>
<div class="line">   Exposure clocks --------&gt; 1,0   2,0   3,0   4,0   5,1   6,2   7,3   8,4   9,5   10,6  11,7  12,8  13,9     ↓     ↓     ↓     ↓     ↓  ↓  ↓  ↓││↓  ↓  ↓  ↓  </div>
<div class="line">           ┌──┐  ┌──┐  ┌──┐  ┌──┐  ┌──┐  ┌──┐  ┌──┐  ┌──┐  ┌──┐  ┌──┐  ┌──┐  ┌──┐  ┌──┐  ┌──┐  ┌──┐  ┌──┐  ┌──┐  ┌──┐  ┌──┐  ┌──┐  ┌──┐  ┌──┐  ┌││┐  ┌──┐  ┌──</div>
<div class="line">    CLK    │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  │  ││││  │  │  │  </div>
<div class="line">         ──┘  └──┘  └──┘  └──┘  └──┘  └──┘  └──┘  └──┘  └──┘  └──┘  └──┘  └──┘  └──┘  └──┘  └──┘  └──┘  └──┘  └──┘  └──┘  └──┘  └──┘  └──┘  └──┘││└──┘  └──┘  </div>
<div class="line">                             ↑           ↑           ↑  ↑                                            ↑</div>
<div class="line">        ST HIGH clocked-in: ─┘           │           │  │                                            │</div>
<div class="line">                        exposure START: ─┘           │  │                            exposure STOP: ─┘</div>
<div class="line">                                 ST LOW clocked-in: ─┘  │                   on 9th CLK rising-edge</div>
<div class="line">                                                        │                              with ST LOW</div>
<div class="line">                           ┌───────────────────────┐    │</div>
<div class="line">    ST       IDLE LOW      │                       │    ↓</div>
<div class="line">         ──────────────────┘                       └────────────────────────────────────────────────────────</div>
<div class="line">                           ↑                       ↑</div>
<div class="line">                           │                       │</div>
<div class="line">       Wait <span class="keywordflow">for</span> CLK LOW    │    Wait <span class="keywordflow">for</span> CLK LOW   │</div>
<div class="line">         to pull ST HIGH: ─┘      to pull ST LOW: ─┘</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="S13131_8h_source.html#l00191">191</a> of file <a class="el" href="S13131_8h_source.html">S13131.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aa40bb208afd06c3ca248325e44444bbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa40bb208afd06c3ca248325e44444bbe">&#9670;&nbsp;</a></span>exposure_ticks</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t exposure_ticks</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>S13131 exposure time. </p>
<ul>
<li>exposure is a 16-bit word</li>
<li>exposure is in units of clock ticks</li>
<li>multiply exposure by 20e-6 seconds to get exposure time in seconds<ul>
<li>one clock tick is 20e-6 seconds because the S13131 is clocked at 50kHz</li>
</ul>
</li>
<li>minimum allowed exposure time is 180e-6 seconds (exposure_ticks = 9)</li>
<li>exposure_ticks is clamped at 9 ticks<ul>
<li>exposure_ticks is set to 9 if SetExposure attempts a value &lt; 9</li>
</ul>
</li>
</ul>
<p>S13131 exposure time.</p>
<ul>
<li>exposure is a 16-bit word</li>
<li>exposure is in units of clock ticks</li>
<li>multiply exposure by 20e-6 seconds to get exposure time in seconds<ul>
<li>one clock tick is 20e-6 seconds because the LIS-770i is clocked at 50kHz </li>
</ul>
</li>
</ul>

<p class="definition">Definition at line <a class="el" href="Lis_8c_source.html#l00032">32</a> of file <a class="el" href="Lis_8c_source.html">Lis.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
