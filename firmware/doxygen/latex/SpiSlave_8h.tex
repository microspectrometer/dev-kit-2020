\hypertarget{SpiSlave_8h}{}\doxysection{lib/src/\+Spi\+Slave.h File Reference}
\label{SpiSlave_8h}\index{lib/src/SpiSlave.h@{lib/src/SpiSlave.h}}
{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include $<$stdbool.\+h$>$}\newline
{\ttfamily \#include \char`\"{}Read\+Write\+Bits.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Spi.\+h\char`\"{}}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{SpiSlave_8h_ad755a0d99463eaaf919cdd1c2a0af729}{\+\_\+\+Signal\+Data\+Ready}} (void)
\item 
void \mbox{\hyperlink{SpiSlave_8h_a03a83560cd64e92c7b667694914e79b2}{\+\_\+\+Signal\+Data\+Not\+Ready}} (void)
\item 
void \mbox{\hyperlink{SpiSlave_8h_a28e50150724ec3a11af7eff46b40b625}{Disable\+Spi\+Interrupt}} (void)
\item 
void \mbox{\hyperlink{SpiSlave_8h_a23b6bfcc9e598ca5130c2b754cfe0a66}{Enable\+Spi\+Interrupt}} (void)
\item 
void \mbox{\hyperlink{SpiSlave_8h_a394c92dc0c1b552f9d1050cdbd794f57}{Spi\+Slave\+Init}} (void)
\item 
void \mbox{\hyperlink{SpiSlave_8h_ac3192410581612594cbec3d368bd6d6b}{Spi\+Slave\+Tx\+Byte}} (uint8\+\_\+t input\+\_\+byte)
\item 
void \mbox{\hyperlink{SpiSlave_8h_a3ee37813c25055a426d6308e1023d0d1}{Spi\+Slave\+Tx}} (uint8\+\_\+t const $\ast$input\+\_\+buffer, uint16\+\_\+t nbytes)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\hypertarget{SpiSlave_8h_autotoc_md31}{}\doxysubsection{API}\label{SpiSlave_8h_autotoc_md31}
void \mbox{\hyperlink{SpiSlave_8h_a28e50150724ec3a11af7eff46b40b625}{Disable\+Spi\+Interrupt(void)}};~\newline
 void \mbox{\hyperlink{SpiSlave_8h_a23b6bfcc9e598ca5130c2b754cfe0a66}{Enable\+Spi\+Interrupt(void)}};~\newline
 void \mbox{\hyperlink{SpiSlave_8h_a394c92dc0c1b552f9d1050cdbd794f57}{Spi\+Slave\+Init(void)}};~\newline
 void \mbox{\hyperlink{SpiSlave_8h_ac3192410581612594cbec3d368bd6d6b}{Spi\+Slave\+Tx\+Byte(uint8\+\_\+t input\+\_\+byte)}};~\newline
 void \mbox{\hyperlink{SpiSlave_8h_a3ee37813c25055a426d6308e1023d0d1}{Spi\+Slave\+Tx(uint8\+\_\+t const $\ast$input\+\_\+buffer, uint16\+\_\+t nbytes)}};~\newline
 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{SpiSlave_8h_a03a83560cd64e92c7b667694914e79b2}\label{SpiSlave_8h_a03a83560cd64e92c7b667694914e79b2}} 
\index{SpiSlave.h@{SpiSlave.h}!\_SignalDataNotReady@{\_SignalDataNotReady}}
\index{\_SignalDataNotReady@{\_SignalDataNotReady}!SpiSlave.h@{SpiSlave.h}}
\doxysubsubsection{\texorpdfstring{\_SignalDataNotReady()}{\_SignalDataNotReady()}}
{\footnotesize\ttfamily void \+\_\+\+Signal\+Data\+Not\+Ready (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Drive {\bfseries{Data Ready}} HIGH.

Definition at line 31 of file Spi\+Slave.\+h.

\mbox{\Hypertarget{SpiSlave_8h_ad755a0d99463eaaf919cdd1c2a0af729}\label{SpiSlave_8h_ad755a0d99463eaaf919cdd1c2a0af729}} 
\index{SpiSlave.h@{SpiSlave.h}!\_SignalDataReady@{\_SignalDataReady}}
\index{\_SignalDataReady@{\_SignalDataReady}!SpiSlave.h@{SpiSlave.h}}
\doxysubsubsection{\texorpdfstring{\_SignalDataReady()}{\_SignalDataReady()}}
{\footnotesize\ttfamily void \+\_\+\+Signal\+Data\+Ready (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

\+\_\+\+Signal\+Data\+Ready behavior\+:~\newline

\begin{DoxyItemize}
\item drives Data\+Ready LOW~\newline

\end{DoxyItemize}

SPI Slave outputs signal {\bfseries{Data Ready}}.~\newline

\begin{DoxyItemize}
\item {\bfseries{Data Ready}} LOW signals next byte of data is ready.~\newline

\item SPI Master waits for {\bfseries{Data Ready}} LOW before reading a byte from the SPI Slave.~\newline

\item SPI Slave drives {\bfseries{Data Ready}} HIGH after each byte of SPI transfer.
\end{DoxyItemize}

Definition at line 14 of file Spi\+Slave.\+h.

\mbox{\Hypertarget{SpiSlave_8h_a28e50150724ec3a11af7eff46b40b625}\label{SpiSlave_8h_a28e50150724ec3a11af7eff46b40b625}} 
\index{SpiSlave.h@{SpiSlave.h}!DisableSpiInterrupt@{DisableSpiInterrupt}}
\index{DisableSpiInterrupt@{DisableSpiInterrupt}!SpiSlave.h@{SpiSlave.h}}
\doxysubsubsection{\texorpdfstring{DisableSpiInterrupt()}{DisableSpiInterrupt()}}
{\footnotesize\ttfamily void Disable\+Spi\+Interrupt (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Clear {\ttfamily SPIE} bit in {\ttfamily SPCR} to disable the SPI ISR.

Disable\+Spi\+Interrupt behavior\+:~\newline

\begin{DoxyItemize}
\item clears the SPI Interrupt Enable bit~\newline

\end{DoxyItemize}

Note\+:~\newline

\begin{DoxyItemize}
\item Even with the SPI ISR disabled, interrupt flag bit {\ttfamily SPIF} in register {\ttfamily SPSR} is still set when a serial transfer completes.~\newline

\item Check the flag by calling {\ttfamily \mbox{\hyperlink{Spi_8h_ac49dafccb5a49148ea7b150634c0116a}{\+\_\+\+Spi\+Transfer\+Is\+Done()}}}~\newline

\item Clear {\ttfamily SPIF} manually by calling {\ttfamily \mbox{\hyperlink{Spi_8h_aed96203cc269b893b63bca5950d21771}{Clear\+Spi\+Interrupt\+Flag()}}}~\newline

\end{DoxyItemize}

Definition at line 48 of file Spi\+Slave.\+h.

\mbox{\Hypertarget{SpiSlave_8h_a23b6bfcc9e598ca5130c2b754cfe0a66}\label{SpiSlave_8h_a23b6bfcc9e598ca5130c2b754cfe0a66}} 
\index{SpiSlave.h@{SpiSlave.h}!EnableSpiInterrupt@{EnableSpiInterrupt}}
\index{EnableSpiInterrupt@{EnableSpiInterrupt}!SpiSlave.h@{SpiSlave.h}}
\doxysubsubsection{\texorpdfstring{EnableSpiInterrupt()}{EnableSpiInterrupt()}}
{\footnotesize\ttfamily void Enable\+Spi\+Interrupt (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Enable\+Spi\+Interrupt behavior\+:~\newline

\begin{DoxyItemize}
\item clears SPI interrupt flag~\newline

\item enables SPI transfer complete interrupt~\newline

\item consumes 6 cycles~\newline

\end{DoxyItemize}

Set SPIE bit in SPCR to execute the SPI ISR when\+:~\newline

\begin{DoxyItemize}
\item the Global Interrupt Enable bit is set in SREG~\newline

\item bit SPIF in register SPSR is set~\newline

\begin{DoxyItemize}
\item bit SPIF in register SPSR is set when a serial transfer completes~\newline

\item SPIF is cleared when executing the SPI ISR~\newline

\item alternatively, SPIF is cleared by first reading the SPI status register, then accessing the SPI data register~\newline

\end{DoxyItemize}
\end{DoxyItemize}

Definition at line 77 of file Spi\+Slave.\+h.

\mbox{\Hypertarget{SpiSlave_8h_a394c92dc0c1b552f9d1050cdbd794f57}\label{SpiSlave_8h_a394c92dc0c1b552f9d1050cdbd794f57}} 
\index{SpiSlave.h@{SpiSlave.h}!SpiSlaveInit@{SpiSlaveInit}}
\index{SpiSlaveInit@{SpiSlaveInit}!SpiSlave.h@{SpiSlave.h}}
\doxysubsubsection{\texorpdfstring{SpiSlaveInit()}{SpiSlaveInit()}}
{\footnotesize\ttfamily void Spi\+Slave\+Init (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Spi\+Slave\+Init behavior\+:~\newline

\begin{DoxyItemize}
\item makes Data\+Ready an output pin~\newline

\item idles Data\+Ready high~\newline

\item makes Miso an output pin~\newline

\item enables SPI~\newline

\item enables SPI interrupt~\newline

\end{DoxyItemize}

Definition at line 118 of file Spi\+Slave.\+h.

\mbox{\Hypertarget{SpiSlave_8h_a3ee37813c25055a426d6308e1023d0d1}\label{SpiSlave_8h_a3ee37813c25055a426d6308e1023d0d1}} 
\index{SpiSlave.h@{SpiSlave.h}!SpiSlaveTx@{SpiSlaveTx}}
\index{SpiSlaveTx@{SpiSlaveTx}!SpiSlave.h@{SpiSlave.h}}
\doxysubsubsection{\texorpdfstring{SpiSlaveTx()}{SpiSlaveTx()}}
{\footnotesize\ttfamily void Spi\+Slave\+Tx (\begin{DoxyParamCaption}\item[{uint8\+\_\+t const $\ast$}]{input\+\_\+buffer,  }\item[{uint16\+\_\+t}]{nbytes }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Spi\+Slave\+Tx behavior\+:~\newline

\begin{DoxyItemize}
\item sends nbytes of input buffer to Spi\+Master~\newline

\end{DoxyItemize}

Definition at line 202 of file Spi\+Slave.\+h.

\mbox{\Hypertarget{SpiSlave_8h_ac3192410581612594cbec3d368bd6d6b}\label{SpiSlave_8h_ac3192410581612594cbec3d368bd6d6b}} 
\index{SpiSlave.h@{SpiSlave.h}!SpiSlaveTxByte@{SpiSlaveTxByte}}
\index{SpiSlaveTxByte@{SpiSlaveTxByte}!SpiSlave.h@{SpiSlave.h}}
\doxysubsubsection{\texorpdfstring{SpiSlaveTxByte()}{SpiSlaveTxByte()}}
{\footnotesize\ttfamily void Spi\+Slave\+Tx\+Byte (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{input\+\_\+byte }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Transmit a byte and ignore byte received.

Spi\+Slave\+Tx\+Byte behavior\+:~\newline

\begin{DoxyItemize}
\item loads SPI data register with input byte~\newline

\item disables SPI ISR before signaling data ready~\newline

\item drives Data\+Ready LOW to signal data is ready~\newline

\item waits until SPI transfer is done~\newline

\item drives Data\+Ready HIGH immediately after SPI transfer finishes~\newline

\item enables SPI ISR after transfer~\newline

\end{DoxyItemize}

Definition at line 150 of file Spi\+Slave.\+h.

